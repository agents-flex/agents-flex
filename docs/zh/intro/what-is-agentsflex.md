
# Agents-Flex

**è½»é‡ Â· é«˜æ€§èƒ½ Â· è·¨å‚å•†çš„ Java AI åº”ç”¨å¼€å‘æ¡†æ¶ã€‚**


### Agents-Flex ç®€ä»‹

**Agents-Flex æ˜¯ä¸€ä¸ªç”± Java ç¼–å†™çš„ã€è½»é‡ä¸”é«˜æ€§èƒ½çš„ AI åº”ç”¨å¼€å‘æ¡†æ¶**ï¼Œç”¨äºç»Ÿä¸€å°è£…å„å¤§ LLM å‚å•†ï¼ˆOpenAIã€Qwenã€DeepSeekã€Moonshotã€Ollama ç­‰ï¼‰çš„ APIï¼Œæå¤§ç®€åŒ–æ„å»º AI åº”ç”¨çš„å¼€å‘æˆæœ¬ã€‚

æ¡†æ¶çš„çµæ„Ÿæ¥æºäº LangChainã€LlamaIndexï¼Œå¹¶ç»“åˆä½œè€…åœ¨å®é™…ä¼ä¸šçº§ AI åº”ç”¨ä¸­çš„å·¥ç¨‹ç»éªŒï¼Œæä¾›ï¼š

* ç»Ÿä¸€çš„æ¨¡å‹è°ƒç”¨ API
* æ ‡å‡†åŒ–çš„å·¥å…·ï¼ˆFunction Callingï¼‰èƒ½åŠ›
* è·¨æœåŠ¡å•†çš„å¯ç§»æ¤æ€§
* é«˜æ‰©å±•æ€§ä¸å¯è§‚æµ‹æ€§
* ä¸ä»»ä½• Java æŠ€æœ¯æ ˆæ— è€¦åˆ

é€‚ç”¨äº **èŠå¤©å¯¹è¯ã€å›¾åƒç”Ÿæˆã€Embeddingã€Function Callingã€RAG ç­‰å¤šç§ AI åœºæ™¯**ã€‚


##  Agents-Flex çš„æ ¸å¿ƒç‰¹æ€§

### 1. ç®€å•æ˜“ç”¨ï¼ˆå¼€ç®±å³ç”¨ï¼‰

æ— éœ€å¤æ‚é…ç½®ï¼Œå‡ è¡Œä»£ç å³å¯å®Œæˆä¸€æ¬¡å®Œæ•´çš„ AI å¯¹è¯ï¼š

```java
@Test
public void testChat() {
    String output = OpenAIChatConfig.builder()
        .endpoint("https://ai.gitee.com")
        .provider("GiteeAI")
        .model("Qwen3-32B")
        .apiKey("PXW1****D12")
        .buildModel()
        .chat("ä½ å«ä»€ä¹ˆåå­—");
    System.out.println(output);
}
```

**é›¶æ¡†æ¶ç»‘å®š**ï¼šå¯åœ¨ Springã€Quarkusã€Micronautã€Servlet ç”šè‡³è£¸ Java ç¯å¢ƒä¸­ç›´æ¥ä½¿ç”¨ã€‚


### 2. é«˜æ€§èƒ½ï¼ˆè½»é‡æ¶æ„ + é«˜æ•ˆå®ç°ï¼‰

Agents-Flex çš„æ ¸å¿ƒç»“æ„æå…¶è½»é‡ï¼Œæ— å¤šä½™ä¾èµ–ï¼Œä¸å¼ºåˆ¶å¼•å…¥ ORMã€Web æ¡†æ¶æˆ–å¤§å‹ä¸­é—´ä»¶ã€‚

**æ€§èƒ½ä¼˜åŠ¿åŒ…æ‹¬ï¼š**

* ğŸš€ **æœ€å°ä¾èµ–è®¾è®¡**ï¼šæ ¸å¿ƒä»…ä¾èµ–å°‘é‡åŸºç¡€ç»„ä»¶ï¼ŒJAR å°ã€æ— è‡ƒè‚¿
* ğŸ§µ **é«˜æ•ˆ I/O è°ƒç”¨é“¾**ï¼šæ”¯æŒé«˜æ€§èƒ½ HTTP Clientï¼ˆå¦‚ OkHttpã€Apache HttpClientã€Vert.xï¼‰
* ğŸ”„ **æµå¼ï¼ˆSSEï¼‰æ€§èƒ½ä¼˜åŒ–**ï¼šæµå¼å“åº”å¼€é”€æä½
* ğŸ”Œ **æŒ‰éœ€åŠ è½½æœºåˆ¶**ï¼šä»…åŠ è½½ä½¿ç”¨åˆ°çš„æ¨¡å‹å‚å•†ï¼Œä¸æµªè´¹èµ„æº
* ğŸ§¹ **é›¶ GC å‹åŠ›çš„æ‹¦æˆªå™¨é“¾**ï¼šè´£ä»»é“¾è®¾è®¡æç®€ï¼Œå‡å°‘ä¸­é—´å¯¹è±¡åˆ›å»º

> é€‚åˆé«˜å¹¶å‘åœºæ™¯ï¼Œä¾‹å¦‚ Chat æœåŠ¡ã€å¤§è¯­è¨€æ¨¡å‹ä»£ç†ã€AgentHubã€é«˜æµé‡ API æœåŠ¡ç­‰ã€‚


### 3. ç”Ÿäº§çº§å¯è§‚æµ‹æ€§ï¼ˆé›¶ä¾µå…¥ï¼‰

å†…ç½® **OpenTelemetry**ï¼Œå¯¹ LLM è°ƒç”¨ä¸å·¥å…·ï¼ˆToolï¼‰æä¾›ç«¯åˆ°ç«¯ç›‘æ§ï¼š

* è‡ªåŠ¨åŸ‹ç‚¹ï¼šè¯·æ±‚æ¬¡æ•°ã€å»¶è¿Ÿã€é”™è¯¯ç‡
* é“¾è·¯è¿½è¸ªï¼šæ¯æ¬¡è°ƒç”¨è‡ªåŠ¨ç”Ÿæˆ Span
* åŒæ­¥ / æµå¼ ç»Ÿä¸€ç›‘æ§
* æŒ‰ providerã€modelã€operationã€tool ç»´åº¦æ‰“æ ‡
* åŠ¨æ€å…³é—­å’Œæ’é™¤ç‰¹å®šå·¥å…·ç›‘æ§
* è‡ªåŠ¨è„±æ•å¯†ç /token å­—æ®µ
* é»˜è®¤ logging å¯¼å‡ºï¼Œå¯åˆ‡æ¢ OTLP å¯¹æ¥ Jaegerã€Tempoã€Grafanaã€Datadog ç­‰

**æ— éœ€å†™ä¸€è¡Œç›‘æ§ä»£ç å³å¯ç›´æ¥ä¸Šç”Ÿäº§ã€‚**



### 4. è´£ä»»é“¾æ¶æ„ï¼ˆè¶…å¼ºæ‰©å±•æ€§ï¼‰

é€šè¿‡è´£ä»»é“¾æ¨¡å¼ï¼ˆChain of Responsibilityï¼‰ç®¡ç†æ‰€æœ‰æ‹¦æˆªé€»è¾‘ï¼š

* LLM è°ƒç”¨é“¾
* å·¥å…·ï¼ˆFunction Callingï¼‰è°ƒç”¨é“¾

ä½ å¯ä»¥åœ¨ä»»æ„é˜¶æ®µæ’å…¥ï¼š

* é‡è¯•
* é‰´æƒ
* æ—¥å¿—
* é™æµ
* A/B æµ‹è¯•
* è‡ªå®šä¹‰è·¯ç”±

æ— éœ€ä¿®æ”¹æ ¸å¿ƒé€»è¾‘ï¼Œå¼€å‘ä½“éªŒæå…¶çµæ´»ã€‚


### 5. åè®®ä¸å®ç°å½»åº•è§£è€¦ï¼ˆå¤šå‚å•†æ¥å…¥è¶…å®¹æ˜“ï¼‰

ä¸¤ä¸ªæŠ½è±¡å±‚ï¼š

* **ChatClient**ï¼šè´Ÿè´£ HTTP/gRPC/WebSocket é€šä¿¡
* **ChatRequestSpecBuilder**ï¼šè´Ÿè´£ä¸åŒå‚å•†çš„è¯·æ±‚æ ¼å¼æ„å»º

è¦æ¥å…¥ä¸€ä¸ªæ–°çš„ LLM å‚å•†ï¼Œåªéœ€ï¼š

- âœ” å®ç° ChatClient
- âœ” å®ç° ChatRequestSpecBuilder

ä¸éœ€æ”¹åŠ¨ Agent-Flex æ ¸å¿ƒæ¡†æ¶ã€‚



### 6. æµå¼ä¸åŒæ­¥ç»Ÿä¸€ API

æ— è®ºæ˜¯ï¼š

* `chat()` ï¼ˆåŒæ­¥ï¼‰
* `chatStream()`ï¼ˆæµå¼ï¼‰

ä¸¤è€…å…±äº«ï¼š

* æ‹¦æˆªå™¨é“¾
* ä¸Šä¸‹æ–‡ç»“æ„
* å¯è§‚æµ‹é€»è¾‘
* é”™è¯¯å¤„ç†æ–¹å¼

è®©å®æ—¶èŠå¤©ã€åå°æ‰¹å¤„ç†ã€é•¿è¿æ¥æ¨æµç­‰åœºæ™¯éƒ½èƒ½ä¿æŒ **ä¸€è‡´çš„ä»£ç ç»“æ„ä¸å¯ç»´æŠ¤æ€§**ã€‚



## ç¤ºä¾‹ä»£ç 



```java
ChatModel model = OpenAIChatConfig.builder()
        .endpoint("https://ai.gitee.com")
        .provider("GiteeAI")
        .model("Qwen3-32B")
        .apiKey("PXW1****D12")
        .buildModel();
```
### åŒæ­¥æ¥å£
```java
String output = model.chat("ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±");
```

### æµå¼æ¥å£

```java
model.chatStream("è§£é‡Šä¸€ä¸‹ Java Stream æœºåˆ¶", delta -> {
    System.out.print(delta);
});
```



## ç”Ÿæ€é¡¹ç›®

ä½œè€…è¿˜å¼€æºäº†å¤šé¡¹ AI ç›¸å…³é¡¹ç›®ï¼Œä¸ Agents-Flex å¯ä»¥å®Œç¾æ­é…ï¼š

* **Tinyflow** â€“ [https://tinyflow.cn](https://tinyflow.cn)

  è½»é‡ã€é«˜æ€§èƒ½çš„ AI å·¥ä½œæµç¼–æ’å¼•æ“ï¼ˆå¯ä¸ Agents-Flex æ·±åº¦é›†æˆï¼Œä¹Ÿæ”¯æŒ SpringAIã€LangChain4j ç­‰äº§å“ï¼‰

* **AIFlowy** â€“ [https://aiflowy.tech](https://aiflowy.tech)

  åŸºäº Java çš„ä¼ä¸šçº§å¼€æº AI åº”ç”¨å¹³å°ï¼Œå¯¹æ ‡ Difyã€Cozeã€è…¾è®¯å…ƒå™¨ç­‰äº§å“

* **AiEditor** â€“ [https://aieditor.com.cn](https://aieditor.com.cn)

  é¢å‘ AI åˆ›ä½œä¸å…¬æ–‡å†™ä½œçš„ä¸‹ä¸€ä»£å¯Œæ–‡æœ¬ç¼–è¾‘å™¨



## å®‰è£…ä¾èµ–

Mavenï¼š

```xml
<dependency>
    <groupId>com.agentsflex</groupId>
    <artifactId>agents-flex-bom</artifactId>
    <version>æœ€æ–°ç‰ˆæœ¬</version>
</dependency>
```

Gradleï¼š

```gradle
implementation("dev.agentsflex:agents-flex:æœ€æ–°ç‰ˆæœ¬")
```


## å‚ä¸è´¡çŒ®

æ¬¢è¿ä¸€èµ·å®Œå–„ Agents-Flexï¼
æ— è®ºæ˜¯ Issueã€PR è¿˜æ˜¯æ–°æ¨¡å‹å‚å•†çš„æ¥å…¥éƒ½éå¸¸æ¬¢è¿ã€‚


## License

Agents-Flex ä½¿ç”¨ **Apache-2.0** åè®®å¼€æºã€‚

